<!DOCTYPE html>
<html>
<title>Learning Cards</title> 
<style>

  .dragme{
			position:relative;
			width: 177px;
			height: 270px;
			cursor: move;
		}
	#draggable {
			background-color: #ccc;
			border: 1px solid #000;
		}
        
    body {
        background-image: url('desktop2.jpg');
    }

</style>
<script>
    function getRndInteger(min, max) {
      return Math.floor(Math.random() * (max - min) ) + min;
    }
    function shuffle(){
        var drags = document.getElementsByClassName("dragme");
        //console.log(drags)
        for (var i = 0; i < drags.length; i++) {
            //console.log(i + " " + drags[i].alt + " " +  drags[i].style.left + "  " + drags[i].style.position)
            //console.log(i + " " + drags[i].style.left)
            drags[i].style.position="absolute"
            drags[i].style.left =getRndInteger(0,window.innerWidth  - 177)+"px";
            drags[i].style.top  =getRndInteger(0,window.innerHeight - 270)+"px";
            
            drags[i].src="cardback.png"
            drags[i].name="back"
        }
    }
    
    function array_shuffle(arra1) {
        var ctr = arra1.length, temp, index;
        while (ctr > 0) {
            index = Math.floor(Math.random() * ctr);
            ctr--;
            temp = arra1[ctr];
            arra1[ctr] = arra1[index];
            arra1[index] = temp;
        }
        return arra1;
    }

    function deal(){
        var drags = document.getElementsByClassName("dragme");
        console.log("# items = " + drags.length)
        var x = [];
        for (var i=0;i < drags.length;i++) {
            x.push(i);
        }
        x=array_shuffle(x)
        
        console.log(x)
        
        //console.log(drags)
        var posx =35
        var posy =35
        for (var i = 0; i < drags.length; i++) {
            var cc=x[i]
            console.log(i + " " + cc + " " + drags[cc].alt + " " +  drags[cc].style.left + "  " + drags[cc].style.position)
            //console.log(i + " " + drags[i].style.left)
            drags[cc].style.position="absolute"
            drags[cc].style.left = posx + "px";
            drags[cc].style.top  = posy + "px" //getRndInteger(0,window.innerHeight - 270)+"px";
            drags[cc].src="cardback.png"
            drags[cc].name="back"

            posx += (177+10)
            //posx += getRndInteger(-25,25)
            //posy += getRndInteger(-25,25)
            if (posx>window.innerWidth  - 177){
                posx = 35 
                posy += (270+10)
            }
            
        }
    }
        
        
    
    

    function myFunction(theID) {
      //document.getElementById("demo").innerHTML = "Hello World";
      //console.log("Double Click")
      //console.log(theID)
      //console.log("THE name =" + document.getElementById(theID.id).name )
      //console.log("THE title=" + document.getElementById(theID.id).title)
      //CHANGE HERE  !!!!!!!!!!!!!!!!!!
      if (document.getElementById(theID.id).name=="back"){
        console.log("Show front")
        console.log(document.getElementById(theID.id).style.left)

        document.getElementById(theID.id).src=document.getElementById(theID.id).alt
        document.getElementById(theID.id).name="front"
        document.getElementById(theID.id).style.position="absolute";
        document.getElementById(theID.id).style.left = posleft +"px"  // document.getElementById(theID.id).style.left - 50 getRandomInt(100);
        
      }else{
        //console.log("Show back")
        document.getElementById(theID.id).src="cardback.png"
        document.getElementById(theID.id).name="back"
      }
      
    }
    
 	function startDrag(e) {
				// determine event object
				if (!e) {
					var e = window.event;
				}
                if(e.preventDefault) e.preventDefault();

				// IE uses srcElement, others use target
				targ = e.target ? e.target : e.srcElement;

				if (targ.className != 'dragme') {return};
				// calculate event X, Y coordinates
					offsetX = e.clientX;
					offsetY = e.clientY;

				// assign default values for top and left properties
				if(!targ.style.left) { targ.style.left='0px'};
				if (!targ.style.top) { targ.style.top='0px'};

				// calculate integer values for top and left 
				// properties
				coordX = parseInt(targ.style.left);
				coordY = parseInt(targ.style.top);
				drag = true;

				// move div element
					document.onmousemove=dragDiv;
                return false;
				
			}
			function dragDiv(e) {
				if (!drag) {return};
				if (!e) { var e= window.event};
				// var targ=e.target?e.target:e.srcElement;
				// move div element
				targ.style.left=coordX+e.clientX-offsetX+'px';
				targ.style.top=coordY+e.clientY-offsetY+'px';
				return false;
			}
			function stopDrag() {
				drag=false;
			}
			window.onload = function() {
				document.onmousedown = startDrag;
				document.onmouseup = stopDrag;
                shuffle()
			}
			
			
			//<div id="draggable" class="dragme">"Hello World!"</div>

                //<button onclick="shuffle()">Shuffle</button>
			</script>


<body>
<button onclick="deal()">Deal</button>

<img src="cardback.png" class="dragme" id="my id 1" alt="there_0.png"  name="back" ondblclick="myFunction(this)" >
<img src="cardback.png" class="dragme" id="my id 2" alt="their_0.png"  name="back" ondblclick="myFunction(this)" >
<img src="cardback.png" class="dragme" id="my id 3" alt="theyre_0.png" name="back" ondblclick="myFunction(this)" >
<img src="cardback.png" class="dragme" id="my id 4" alt="there_1.png"  name="back" ondblclick="myFunction(this)" >
<img src="cardback.png" class="dragme" id="my id 5" alt="their_1.png"  name="back" ondblclick="myFunction(this)" >
<img src="cardback.png" class="dragme" id="my id 6" alt="theyre_1.png" name="back" ondblclick="myFunction(this)" >
<img src="cardback.png" class="dragme" id="my id 7" alt="2Diamonds.png"  name="back" ondblclick="myFunction(this)" >
 
</body>			
</html>			
